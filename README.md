# Как запустить проект  
```bash  
docker-compose up -d --build  
```  
#### После сервис будет доступен по ссылке.  
[http://127.0.0.1:8005/](http://127.0.0.1:8005)  

### Документация по эндпоинтам доступна по ссылке.
http://127.0.0.1:8005/docs/

## Cоздание статистики
```http
POST /create/statistic
```

| Параметр | Тип данных | Описание |
| :--- | :--- | :--- |
| `date` | `datetime.date` | **Required**. Дата события |
| `views` | `int` | **Optional**. 	Количество показазов |
| `clicks` | `int` | **Optional**. Количество кликов |
| `cost` | `decimal` | **Optional**. Стоимость |

### Ответ будет в формате созданного объекта и плюс поле id

```json
{
  "id":1,
  "date": "2022-11-30",
  "views": 1500,
  "clicks": 120,
  "cost": 5000
}
```
## Получение статистики
```http
GET /get/statistic?from_date=2022-06-01&to_date=2022-11-30&order_field=date'
```
Все три параметра опциональны. Можно указать начальную дату и не указать конечную и наоборот.
Поле order_field используется для указания поля для сортировки. По умолчанию стоит поле date.
Если указать поле, которое не существует будет выведена ошибка.

| Параметр | Тип данных | Описание                                                                                                                                                                                        |
| :--- | :--- |:------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `from_date` | `datetime.date` | **Optional**. Начальная дата                                                                                                                                                                    |
| `to_date` | `datetime.date` | **Optional**. 	Конечная дата                                                                                                                                                                    |
| `order_field` | `str` | **Optional**. Поле для сортировкиф. Возможные поля: id, date,views,clicks,cost,cpc,cpm. Указав одно из полей можно получить отсортированный список по этому полю. Значение по умолчанию `date`. |

### Ответ:

```json
[
  {
    "id": 1,
    "date": "2022-11-30",
    "views": 5000,
    "clicks": 1500,
    "cost": 10000,
    "cpc": 6.67,
    "cpm": 2000
  },
  {
    "id": 2,
    "date": "2022-09-24",
    "views": 4000,
    "clicks": 500,
    "cost": 2000,
    "cpc": 4, Средняя стоимость клика
    "cpm": 500 Средняя стоимость 1000показов
  }
]
```
 "cpc": 4, Средняя стоимость клика. Данные расчитываются через **cpc=cost/clicks**
  "cpm": 500 Средняя стоимость 1000показов. Расчет прои.сходит через формулу **cpm=cost/views*1000**.


## Удаление статистики
```http
DELETE /delete/statistic'
```
#### Ответ:
```json
 {"status": "ok"}
 ```